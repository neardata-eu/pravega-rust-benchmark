# Pravega Rust Benchmark

Simple benchmark to measure the IO performance of Pravega systems using the Pravega Rust client.

# Compile

Compilation is made using the cargo build system and package manager.

```
cargo build
```

# Run

To run the benchmark is necessary a set the configuration file (YAML format) as a command line parameter, following section describe the parameters required in the configuration file.

```
./target/debug/pravega-rust-benchmark config.yaml
```

# Configuration

| Parameter    | Description   | Example | Optional |
| ------------ | ------------- | ------- | -------- |
| name         | Benchmark test name | Test1 | No |
| address      | Pravega IP address and Port | "localhost:9090" | No |
| payload_file | Path of the payload file (sending data) | "payload/payload-100b.data" | No |
| message_num  | Number of messages to send | 20 | No |
| scope        | Pravega Scope. Default autogenerated | scope1 | Yes |
| stream       | Pravega Stream. Default autogenerated | stream1 | Yes |

# Metrics Result Output

Benchmark results are stored in an output JSON file that contains the following data and metrics:

Data
- **name**: name of the test set in the configuration file.
- **message_num**: Number of sent messages.
- **message_size**: Size in bits of the payload file.
- **scope**: Generated or set in the configuration file scope.
- **stream**: Generated or set in the configuration file stream.
- **duration**: Total duration of the writing messages.

Metrics
- **mean_write_latency**: Mean of all write latencies.
- **write_latency_50pct**: Write latency at 50%.
- **write_latency_75pct**: Write latency at 75%.
- **write_latency_95pct**: Write latency at 95%.
- **write_latency_99pct**: Write latency at 99%.
- **write_latencies**: Vector with all write latencies.
- **read_latencies**: Vector with all read latencies.
- **throughput**: Throughput = Total Output Data / Total Time in Miliseconds.
